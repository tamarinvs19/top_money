{% extends 'base.html' %}
{% block title %}Assets - Finance Manager{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-2">
  <h2>Assets</h2>
  <a href="{% url 'asset_add' %}" class="btn btn-primary">+ Add Asset</a>
</div>

<div class="card mb-4">
  <div class="card-body">
    <div class="d-flex justify-content-between">
      <strong>Total Balance</strong>
      <strong class="{% if total_balance >= 0 %}text-success{% else %}text-danger{% endif %}">
        {{ total_balance|floatformat:2 }} RUB
      </strong>
    </div>
  </div>
</div>

{% for asset_type, type_data in assets_by_type.items %}
<div class="card mb-3">
  <div class="card-header bg-light">
    <div class="d-flex justify-content-between align-items-center">
      <strong>{{ asset_type }}</strong>
      <span>{{ type_data.total|floatformat:2 }}</span>
    </div>
  </div>
  <div class="card-body p-0">
    {% for asset in type_data.assets %}
    <div class="card-body border-bottom">
      <a href="{% url 'asset_edit' asset.pk %}" class="transaction-link d-flex justify-content-between align-items-center">
        <div>
          <strong>{{ asset.name }}</strong>
        </div>
        <div class="text-end">
          <strong class="{% if asset.balance >= 0 %}text-dark{% else %}text-danger{% endif %}">
            {{ asset.balance|floatformat:2 }}
          </strong>
          <small class="text-muted">{% if asset.currency == 'RUB' %}₽{% elif asset.currency == 'USD' %}${% elif asset.currency == 'EUR' %}€{% else %}{{ asset.currency }}{% endif %}</small>
        </div>
      </a>
    </div>
    {% endfor %}
  </div>
</div>
{% empty %}
<div class="text-center text-muted py-5">
  <p>No assets yet</p>
  <a href="{% url 'asset_add' %}" class="btn btn-primary">Add your first asset</a>
</div>
{% endfor %}
{% endblock %}
